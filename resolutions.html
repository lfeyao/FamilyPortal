<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Year Resolutions - Yu Family Lagoon</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=DM+Sans:wght@400;500;700&display=swap');
        
        :root {
            --primary-dark: #1a1815;
            --primary-warm: #8b5a3c;
            --accent-gold: #d4a574;
            --accent-sage: #7a8471;
            --cream: #faf8f3;
            --soft-gray: #e8e4dd;
            --text-primary: #2c2925;
            --text-secondary: #6b635a;
            --danger: #c9302c;
            --shadow-soft: 0 4px 6px rgba(26, 24, 21, 0.07);
            --shadow-medium: 0 10px 25px rgba(26, 24, 21, 0.1);
            --shadow-large: 0 20px 40px rgba(26, 24, 21, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(135deg, #faf8f3 0%, #f0ebe3 100%);
            min-height: 100vh;
            color: var(--text-primary);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-medium);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header h1 {
            font-family: 'Crimson Text', serif;
            font-size: 2.2rem;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header h1 span {
            font-size: 2rem;
        }

        .btn-back {
            background: var(--primary-dark);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-back:hover {
            background: var(--text-primary);
            transform: translateY(-1px);
        }

        .btn-back svg {
            width: 18px;
            height: 18px;
            fill: white;
        }

        .year-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-medium);
        }

        .year-header {
            font-family: 'Crimson Text', serif;
            font-size: 2rem;
            color: var(--primary-warm);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--soft-gray);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .year-header::before {
            content: 'üéâ';
        }

        .resolutions-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .resolution-column {
            background: var(--cream);
            border-radius: 16px;
            padding: 20px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
        }

        .column-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--soft-gray);
        }

        .column-emoji {
            font-size: 3rem;
            display: block;
            margin-bottom: 8px;
        }

        .column-name {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .add-resolution {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .add-resolution input {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid var(--soft-gray);
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: 'DM Sans', sans-serif;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .add-resolution input:focus {
            border-color: var(--accent-gold);
        }

        .add-resolution input::placeholder {
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .btn-add {
            background: var(--accent-gold);
            color: white;
            border: none;
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-add:hover {
            background: var(--primary-warm);
            transform: scale(1.05);
        }

        .btn-add svg {
            width: 18px;
            height: 18px;
            fill: white;
        }

        .resolution-list {
            list-style: none;
            flex: 1;
            overflow-y: auto;
        }

        .resolution-item {
            background: white;
            padding: 12px 40px 12px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-soft);
            font-size: 0.95rem;
            line-height: 1.5;
            position: relative;
            transition: all 0.2s ease;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .resolution-item:hover {
            box-shadow: var(--shadow-medium);
        }

        .resolution-item::before {
            content: '‚Ä¢';
            color: var(--accent-gold);
            font-weight: bold;
            flex-shrink: 0;
        }

        .resolution-text {
            flex: 1;
            word-break: break-word;
        }

        .btn-delete {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            opacity: 0;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .resolution-item:hover .btn-delete {
            opacity: 1;
        }

        .btn-delete:hover {
            background: rgba(201, 48, 44, 0.1);
        }

        .btn-delete svg {
            width: 16px;
            height: 16px;
            fill: var(--danger);
        }

        .empty-state {
            color: var(--text-secondary);
            font-style: italic;
            text-align: center;
            padding: 20px;
        }

        @media (max-width: 1024px) {
            .resolutions-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .resolutions-grid {
                grid-template-columns: 1fr;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 1.6rem;
            }

            .year-section {
                padding: 20px;
            }

            .year-header {
                font-size: 1.5rem;
            }

            .btn-delete {
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span>‚ú®</span> New Year Resolutions</h1>
            <a href="portal.html" class="btn-back">
                <svg viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
                Back to Portal
            </a>
        </div>

        <!-- 2025 -->
        <div class="year-section" data-year="2025">
            <h2 class="year-header">2025</h2>
            <div class="resolutions-grid">
                <div class="resolution-column" data-person="dan">
                    <div class="column-header">
                        <span class="column-emoji">üêü</span>
                        <span class="column-name">Dan</span>
                    </div>
                    <div class="add-resolution">
                        <input type="text" placeholder="Add resolution..." onkeypress="if(event.key === 'Enter') addResolution(this)">
                        <button class="btn-add" onclick="addResolution(this.previousElementSibling)">
                            <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                        </button>
                    </div>
                    <ul class="resolution-list"></ul>
                </div>

                <div class="resolution-column" data-person="cat">
                    <div class="column-header">
                        <span class="column-emoji">üê±</span>
                        <span class="column-name">Cat</span>
                    </div>
                    <div class="add-resolution">
                        <input type="text" placeholder="Add resolution..." onkeypress="if(event.key === 'Enter') addResolution(this)">
                        <button class="btn-add" onclick="addResolution(this.previousElementSibling)">
                            <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                        </button>
                    </div>
                    <ul class="resolution-list"></ul>
                </div>

                <div class="resolution-column" data-person="sebastian">
                    <div class="column-header">
                        <span class="column-emoji">üêß</span>
                        <span class="column-name">Sebastian</span>
                    </div>
                    <div class="add-resolution">
                        <input type="text" placeholder="Add resolution..." onkeypress="if(event.key === 'Enter') addResolution(this)">
                        <button class="btn-add" onclick="addResolution(this.previousElementSibling)">
                            <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                        </button>
                    </div>
                    <ul class="resolution-list"></ul>
                </div>

                <div class="resolution-column" data-person="elle">
                    <div class="column-header">
                        <span class="column-emoji">ü¶´</span>
                        <span class="column-name">Elle</span>
                    </div>
                    <div class="add-resolution">
                        <input type="text" placeholder="Add resolution..." onkeypress="if(event.key === 'Enter') addResolution(this)">
                        <button class="btn-add" onclick="addResolution(this.previousElementSibling)">
                            <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                        </button>
                    </div>
                    <ul class="resolution-list"></ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'yuFamilyResolutions';

        // Load resolutions from localStorage
        function loadResolutions() {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : {};
        }

        // Save resolutions to localStorage
        function saveResolutions(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        // Render resolutions for a column
        function renderResolutions(year, person) {
            const data = loadResolutions();
            const key = `${year}-${person}`;
            const resolutions = data[key] || [];
            
            const column = document.querySelector(`.year-section[data-year="${year}"] .resolution-column[data-person="${person}"]`);
            const list = column.querySelector('.resolution-list');
            
            list.innerHTML = '';
            
            if (resolutions.length === 0) {
                list.innerHTML = '<li class="empty-state">No resolutions yet</li>';
                return;
            }
            
            resolutions.forEach((text, index) => {
                const li = document.createElement('li');
                li.className = 'resolution-item';
                li.innerHTML = `
                    <span class="resolution-text">${escapeHtml(text)}</span>
                    <button class="btn-delete" onclick="deleteResolution('${year}', '${person}', ${index})" title="Delete">
                        <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                    </button>
                `;
                list.appendChild(li);
            });
        }

        // Add a resolution
        function addResolution(input) {
            const text = input.value.trim();
            if (!text) return;
            
            const column = input.closest('.resolution-column');
            const yearSection = input.closest('.year-section');
            const year = yearSection.dataset.year;
            const person = column.dataset.person;
            
            const data = loadResolutions();
            const key = `${year}-${person}`;
            
            if (!data[key]) data[key] = [];
            data[key].push(text);
            
            saveResolutions(data);
            renderResolutions(year, person);
            
            input.value = '';
            input.focus();
        }

        // Delete a resolution
        function deleteResolution(year, person, index) {
            const data = loadResolutions();
            const key = `${year}-${person}`;
            
            if (data[key]) {
                data[key].splice(index, 1);
                saveResolutions(data);
                renderResolutions(year, person);
            }
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Initialize on page load
        function init() {
            const yearSections = document.querySelectorAll('.year-section');
            yearSections.forEach(section => {
                const year = section.dataset.year;
                const columns = section.querySelectorAll('.resolution-column');
                columns.forEach(column => {
                    const person = column.dataset.person;
                    renderResolutions(year, person);
                });
            });
        }

        window.onload = init;
    </script>
</body>
</html>
